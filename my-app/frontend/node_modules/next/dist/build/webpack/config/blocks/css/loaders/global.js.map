{"version":3,"sources":["../../../../../../../build/webpack/config/blocks/css/loaders/global.ts"],"sourcesContent":["import { AcceptedPlugin } from 'postcss'\nimport { webpack } from 'next/dist/compiled/webpack/webpack'\nimport { ConfigurationContext } from '../../../utils'\nimport { getClientStyleLoader } from './client'\nimport { cssFileResolve } from './file-resolve'\nimport postcss from 'postcss'\n\nexport function getGlobalCssLoader(\n  ctx: ConfigurationContext,\n  postCssPlugins: AcceptedPlugin[],\n  preProcessors: readonly webpack.RuleSetUseItem[] = []\n): webpack.RuleSetUseItem[] {\n  const loaders: webpack.RuleSetUseItem[] = []\n\n  if (ctx.isClient) {\n    // Add appropriate development more or production mode style\n    // loader\n    loaders.push(\n      getClientStyleLoader({\n        isDevelopment: ctx.isDevelopment,\n        assetPrefix: ctx.assetPrefix,\n      })\n    )\n  }\n\n  // Resolve CSS `@import`s and `url()`s\n  loaders.push({\n    loader: require.resolve('../../../../loaders/css-loader/src'),\n    options: {\n      importLoaders: 1 + preProcessors.length,\n      // Next.js controls CSS Modules eligibility:\n      modules: false,\n      url: cssFileResolve,\n      import: (url: string, _: any, resourcePath: string) =>\n        cssFileResolve(url, resourcePath),\n    },\n  })\n\n  // Compile CSS\n  loaders.push({\n    loader: require.resolve('../../../../loaders/postcss-loader/src'),\n    options: {\n      postcss: postcss(postCssPlugins),\n    },\n  })\n\n  loaders.push(\n    // Webpack loaders run like a stack, so we need to reverse the natural\n    // order of preprocessors.\n    ...preProcessors.slice().reverse()\n  )\n\n  return loaders\n}\n"],"names":[],"mappings":";;;;QAOgB,kBAAkB,GAAlB,kBAAkB;AAJG,GAAU,CAAV,OAAU;AAChB,GAAgB,CAAhB,YAAgB;AAC3B,GAAS,CAAT,QAAS;;;;;;SAEb,kBAAkB,CAChC,GAAyB,EACzB,cAAgC,EAChC,aAAgD,OACtB,CAAC;IAC3B,KAAK,CAAC,OAAO;IAEb,EAAE,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC;QACjB,EAA4D,AAA5D,0DAA4D;QAC5D,EAAS,AAAT,OAAS;QACT,OAAO,CAAC,IAAI,KAdqB,OAAU;YAgBvC,aAAa,EAAE,GAAG,CAAC,aAAa;YAChC,WAAW,EAAE,GAAG,CAAC,WAAW;;IAGlC,CAAC;IAED,EAAsC,AAAtC,oCAAsC;IACtC,OAAO,CAAC,IAAI;QACV,MAAM,EAAE,OAAO,CAAC,OAAO,EAAC,kCAAoC;QAC5D,OAAO;YACL,aAAa,EAAE,CAAC,GAAG,aAAa,CAAC,MAAM;YACvC,EAA4C,AAA5C,0CAA4C;YAC5C,OAAO,EAAE,KAAK;YACd,GAAG,EA5BsB,YAAgB;YA6BzC,MAAM,GAAG,GAAW,EAAE,CAAM,EAAE,YAAoB,OA7BzB,YAAgB,iBA8BxB,GAAG,EAAE,YAAY;;;IAItC,EAAc,AAAd,YAAc;IACd,OAAO,CAAC,IAAI;QACV,MAAM,EAAE,OAAO,CAAC,OAAO,EAAC,sCAAwC;QAChE,OAAO;YACL,OAAO,MArCO,QAAS,UAqCN,cAAc;;;IAInC,OAAO,CAAC,IAAI,CACV,EAAsE,AAAtE,oEAAsE;IACtE,EAA0B,AAA1B,wBAA0B;OACvB,aAAa,CAAC,KAAK,GAAG,OAAO;WAG3B,OAAO;AAChB,CAAC"}