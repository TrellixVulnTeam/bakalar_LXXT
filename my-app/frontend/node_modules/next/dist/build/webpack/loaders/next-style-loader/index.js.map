{"version":3,"sources":["../../../../../build/webpack/loaders/next-style-loader/index.js"],"sourcesContent":["import loaderUtils from 'next/dist/compiled/loader-utils'\nimport path from 'path'\nimport isEqualLocals from './runtime/isEqualLocals'\n\nconst loaderApi = () => {}\n\nloaderApi.pitch = function loader(request) {\n  const loaderSpan = this.currentTraceSpan.traceChild('next-style-loader')\n\n  return loaderSpan.traceFn(() => {\n    const options = loaderUtils.getOptions(this)\n\n    const insert =\n      typeof options.insert === 'undefined'\n        ? '\"head\"'\n        : typeof options.insert === 'string'\n        ? JSON.stringify(options.insert)\n        : options.insert.toString()\n    const injectType = options.injectType || 'styleTag'\n    const esModule =\n      typeof options.esModule !== 'undefined' ? options.esModule : false\n\n    delete options.esModule\n\n    switch (injectType) {\n      case 'linkTag': {\n        const hmrCode = this.hot\n          ? `\nif (module.hot) {\n  module.hot.accept(\n    ${loaderUtils.stringifyRequest(this, `!!${request}`)},\n    function() {\n     ${\n       esModule\n         ? 'update(content);'\n         : `content = require(${loaderUtils.stringifyRequest(\n             this,\n             `!!${request}`\n           )});\n\n           content = content.__esModule ? content.default : content;\n\n           update(content);`\n     }\n    }\n  );\n\n  module.hot.dispose(function() {\n    update();\n  });\n}`\n          : ''\n\n        return `${\n          esModule\n            ? `import api from ${loaderUtils.stringifyRequest(\n                this,\n                `!${path.join(__dirname, 'runtime/injectStylesIntoLinkTag.js')}`\n              )};\n            import content from ${loaderUtils.stringifyRequest(\n              this,\n              `!!${request}`\n            )};`\n            : `var api = require(${loaderUtils.stringifyRequest(\n                this,\n                `!${path.join(__dirname, 'runtime/injectStylesIntoLinkTag.js')}`\n              )});\n            var content = require(${loaderUtils.stringifyRequest(\n              this,\n              `!!${request}`\n            )});\n\n            content = content.__esModule ? content.default : content;`\n        }\n\nvar options = ${JSON.stringify(options)};\n\noptions.insert = ${insert};\n\nvar update = api(content, options);\n\n${hmrCode}\n\n${esModule ? 'export default {}' : ''}`\n      }\n\n      case 'lazyStyleTag':\n      case 'lazySingletonStyleTag': {\n        const isSingleton = injectType === 'lazySingletonStyleTag'\n\n        const hmrCode = this.hot\n          ? `\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = ${isEqualLocals.toString()};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      ${loaderUtils.stringifyRequest(this, `!!${request}`)},\n      function () {\n        ${\n          esModule\n            ? `if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              if (update && refs > 0) {\n                update(content);\n              }`\n            : `content = require(${loaderUtils.stringifyRequest(\n                this,\n                `!!${request}`\n              )});\n\n              content = content.__esModule ? content.default : content;\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              if (update && refs > 0) {\n                update(content);\n              }`\n        }\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    if (update) {\n      update();\n    }\n  });\n}`\n          : ''\n\n        return `${\n          esModule\n            ? `import api from ${loaderUtils.stringifyRequest(\n                this,\n                `!${path.join(\n                  __dirname,\n                  'runtime/injectStylesIntoStyleTag.js'\n                )}`\n              )};\n            import content from ${loaderUtils.stringifyRequest(\n              this,\n              `!!${request}`\n            )};`\n            : `var api = require(${loaderUtils.stringifyRequest(\n                this,\n                `!${path.join(\n                  __dirname,\n                  'runtime/injectStylesIntoStyleTag.js'\n                )}`\n              )});\n            var content = require(${loaderUtils.stringifyRequest(\n              this,\n              `!!${request}`\n            )});\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }`\n        }\n\nvar refs = 0;\nvar update;\nvar options = ${JSON.stringify(options)};\n\noptions.insert = ${insert};\noptions.singleton = ${isSingleton};\n\nvar exported = {};\n\nexported.locals = content.locals || {};\nexported.use = function() {\n  if (!(refs++)) {\n    update = api(content, options);\n  }\n\n  return exported;\n};\nexported.unuse = function() {\n  if (refs > 0 && !--refs) {\n    update();\n    update = null;\n  }\n};\n\n${hmrCode}\n\n${esModule ? 'export default' : 'module.exports ='} exported;`\n      }\n\n      case 'styleTag':\n      case 'singletonStyleTag':\n      default: {\n        const isSingleton = injectType === 'singletonStyleTag'\n\n        const hmrCode = this.hot\n          ? `\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = ${isEqualLocals.toString()};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      ${loaderUtils.stringifyRequest(this, `!!${request}`)},\n      function () {\n        ${\n          esModule\n            ? `if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);`\n            : `content = require(${loaderUtils.stringifyRequest(\n                this,\n                `!!${request}`\n              )});\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);`\n        }\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}`\n          : ''\n\n        return `${\n          esModule\n            ? `import api from ${loaderUtils.stringifyRequest(\n                this,\n                `!${path.join(\n                  __dirname,\n                  'runtime/injectStylesIntoStyleTag.js'\n                )}`\n              )};\n            import content from ${loaderUtils.stringifyRequest(\n              this,\n              `!!${request}`\n            )};`\n            : `var api = require(${loaderUtils.stringifyRequest(\n                this,\n                `!${path.join(\n                  __dirname,\n                  'runtime/injectStylesIntoStyleTag.js'\n                )}`\n              )});\n            var content = require(${loaderUtils.stringifyRequest(\n              this,\n              `!!${request}`\n            )});\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }`\n        }\n\nvar options = ${JSON.stringify(options)};\n\noptions.insert = ${insert};\noptions.singleton = ${isSingleton};\n\nvar update = api(content, options);\n\n${hmrCode}\n\n${esModule ? 'export default' : 'module.exports ='} content.locals || {};`\n      }\n    }\n  })\n}\n\nmodule.exports = loaderApi\n"],"names":[],"mappings":"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"}